#pragma once

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// \file
/// \brief Functions and classes for image segmentation.
/// \author Reiex
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include <DejaVu/types.hpp>

namespace djv
{
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// \addtogroup ImageProcessing
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	namespace segmentation
	{
		///////////////////////////////////////////////////////////////////////////////////////////////////////////////
		/// \addtogroup segmentation
		/// \ingroup ImageProcessing
		/// \{
		///////////////////////////////////////////////////////////////////////////////////////////////////////////////

		struct ImageSegmentation
		{
			ImageSegmentation(uint64_t w, uint64_t h, uint64_t k);

			scp::Mat<uint64_t> groups;
			std::vector<Color> groupColors;
		};

		///////////////////////////////////////////////////////////////////////////////////////////////////////////////
		/// \brief K-Means segmentation algorithm.
		///////////////////////////////////////////////////////////////////////////////////////////////////////////////
		ImageSegmentation kMeans(const Img& m, uint64_t k, float epsilon = 0.f);

		///////////////////////////////////////////////////////////////////////////////////////////////////////////////
		/// \}
		///////////////////////////////////////////////////////////////////////////////////////////////////////////////
	}
}
